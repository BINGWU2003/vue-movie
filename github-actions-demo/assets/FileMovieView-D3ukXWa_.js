function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FileDialogCom-BIvH5OgZ.js","assets/index-BtiZJA6V.js","assets/index-X0yiRCPk.css","assets/el-dialog-C6nSDiPf.js","assets/BaseTableCom-DPhfIgH9.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/el-input-DQWJxFHl.js","assets/index-D8AN6Cr_.js","assets/event-NTjbwY5A.js","assets/el-button-BkswBdMW.js","assets/el-button-BWsECEeL.css","assets/el-input-CxR3fIHd.css","assets/el-switch-Ch1tqv_s.js","assets/el-switch-CjjxlVBz.css","assets/http-uaPK1vfr.js","assets/http-0AX1x0v0.css","assets/_initCloneObject-C3mgaNU_.js","assets/isEqual-QJ1JA930.js","assets/BaseTableCom-CuwXaiUY.css","assets/el-dialog-B5k8mcSF.css","assets/el-form-item-DnEKQG3Y.js","assets/_baseClone-dr7Cctac.js","assets/el-form-item-DeFBUyhQ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as s,o as _,c as F,f as d,w as h,d as y,g as b,u as i,h as k,t as I,i as U,j as A,k as L,e as E,l as M,m as $,_ as O}from"./index-BtiZJA6V.js";import{E as z}from"./el-button-BkswBdMW.js";import{E as j}from"./el-input-DQWJxFHl.js";import{O as G,B as H}from"./BaseTableCom-DPhfIgH9.js";import{U as q}from"./UploadFileCom-CUUbSSGe.js";import{E as J}from"./el-dialog-C6nSDiPf.js";import{E as K,l as Q}from"./tencentCloud-DYilJfO5.js";import{E as P}from"./http-uaPK1vfr.js";import{d as W,g as X,a as Y}from"./video-file-a0vrkD_Y.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D8AN6Cr_.js";import"./event-NTjbwY5A.js";import"./el-switch-Ch1tqv_s.js";import"./_initCloneObject-C3mgaNU_.js";import"./isEqual-QJ1JA930.js";import"./_baseClone-dr7Cctac.js";const ee=()=>{const m=s(0),t=s(""),o=s(!1);return{percentage:m,status:t,dialogVisible:o,changePercentage:n=>{m.value=n},offProgress:(n="success",g="上传成功")=>{setTimeout(()=>{o.value=!1},1200),n==="success"?(t.value="success",P({message:g,type:"success"})):(P.error(`${g}`),t.value="exception")},openProgress:()=>{t.value="",m.value=0,o.value=!0}}},ae={class:"progress-lite"},te={class:"demo-progress"},oe={class:"percentage-value"},se={__name:"ProgressCom",props:{progressType:{type:Object,default:()=>({type1:!0,type2:!1,type3:!1})}},setup(m,{expose:t}){const o=m,{percentage:l,status:c,dialogVisible:p,changePercentage:n,offProgress:g,openProgress:w}=ee();return t({changePercentage:n,offProgress:g,openProgress:w}),(x,f)=>{const v=K,V=J;return _(),F("div",ae,[d(V,{modelValue:i(p),"onUpdate:modelValue":f[0]||(f[0]=u=>U(p)?p.value=u:null),title:"上传中",width:"500","show-close":!1},{default:h(()=>[y("div",te,[o.progressType.type1?(_(),b(v,{key:0,percentage:i(l),"stroke-width":22,striped:"",status:i(c),duration:80,"striped-flow":"","text-inside":!0},null,8,["percentage","status"])):k("",!0),o.progressType.type2?(_(),b(v,{key:1,percentage:i(l),indeterminate:!0,status:i(c),"stroke-width":16},null,8,["percentage","status"])):k("",!0),o.progressType.type3?(_(),b(v,{key:2,type:"dashboard",percentage:i(l),status:i(c)},{default:h(({percentage:u})=>[y("span",oe,I(u)+"%",1)]),_:1},8,["percentage","status"])):k("",!0)])]),_:1},8,["modelValue"])])}}},le={class:"file-movie"},ne={class:"options"},re={class:"left"},ie={class:"right"},ce={__name:"FileMovieView",setup(m){const t=s(null),o=s(""),l=s(null),c=s(null),p=s([]),n=s(0),g=[{command:"delete",handleAction:async e=>{await W({_id:e._id}).then(async a=>{P({message:a.data.msg,type:"success"}),await u()})},actionName:"删除",icon:"Delete",auth:"delete-file"},{command:"view",handleAction:e=>{w.value=e,f.value=!0},actionName:"查看",icon:"View",auth:"view-file"}],w=s({}),x=[{prop:"fileName",label:"文件名称",width:"300"},{prop:"fileLink",label:"文件链接"}],f=s(!1),v=$(()=>O(()=>import("./FileDialogCom-BIvH5OgZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),V=async(e,a)=>{await D({pageSize:e,pageIndex:a,fileName:o.value})},u=async()=>{const{pageSize:e,currentPage:a}=t.value.getPaginationData(),r=a;await D({fileName:o.value,pageSize:e,pageIndex:r})},D=async e=>{t.value.changeTableLoading(),await X(e).then(a=>{const{videoFileArr:r,videoFileTotal:C}=a.data;p.value=r,n.value=C,t.value.changeTableLoading()}).catch(a=>{console.log("err",a)})},N=e=>{l.value.changePercentage(e)},R=async e=>{e.length?(l.value.openProgress(),await Q(e[0],"",N).then(async a=>{const r={fileName:e[0].name,fileLink:a};await Y(r).then(()=>{l.value.offProgress(),c.value.clearFiles(),u()})})):P({message:"请选择文件",type:"error"})},S=async()=>{await u()};return A(async()=>{const{pageSize:e,currentPage:a}=t.value.getPaginationData();await D({pageSize:e,pageIndex:a})}),(e,a)=>{const r=j,C=z,B=M("permission");return _(),F("div",le,[d(G,null,{options:h(()=>[y("div",ne,[y("div",re,[L((_(),b(q,{ref_key:"uploadFileComRef",ref:c,onHandleConfirm:R,accept:".mp4,.mkv"},{tip:h(()=>[E("文件容量小于等于30mb")]),_:1})),[[B,"add-file"]])]),y("div",ie,[d(r,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=T=>o.value=T),placeholder:"请输入文件名称",clearable:""},null,8,["modelValue"]),d(C,{type:"primary",style:{"margin-left":"6px"},onClick:S},{default:h(()=>[E("搜索")]),_:1})])])]),_:1}),d(H,{ref_key:"baseTableComRef",ref:t,showSelect:!0,"column-data":x,"dropdown-data":g,"table-data":p.value,pageSizes:[5,8,10],total:n.value,showPagination:!0,onUpdateTableData:V},null,8,["table-data","total"]),d(se,{ref_key:"progressComRef",ref:l},null,512),d(i(v),{"current-row":w.value,fileDialogVisible:f.value,"onUpdate:fileDialogVisible":a[1]||(a[1]=T=>f.value=T)},null,8,["current-row","fileDialogVisible"])])}}},Te=Z(ce,[["__scopeId","data-v-11092b16"]]);export{Te as default};
